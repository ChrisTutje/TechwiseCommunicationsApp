<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Space Invader Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #000;
    }

    .game-container {
      position: relative;
      width: 100%;
      height: 100vh;
    }

    .triangle-up {
      position: absolute;
      bottom: 5%;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 25px solid transparent;
      border-right: 25px solid transparent;
      border-bottom: 50px solid #333;
      z-index: 2;
    }

    .space-invader {
      position: absolute;
      bottom: 80%; /* Adjusted starting position */
      left: 50%;
      transform: translateX(-50%);
      --block-size: 40px; /* Increased size for the space invader */
      box-shadow: 0 0 0 var(--block-size) #333,
        0 var(--block-size) 0 var(--block-size) #333,
        calc(var(--block-size) * -2.5) calc(var(--block-size) * 1.5) 0 calc(var(--block-size) * .5) #333,
        calc(var(--block-size) * 2.5) calc(var(--block-size) * 1.5) 0 calc(var(--block-size) * .5) #333,
        calc(var(--block-size) * -3) calc(var(--block-size) * -3) 0 0 #333,
        calc(var(--block-size) * 3) calc(var(--block-size) * -3) 0 0 #333,
        calc(var(--block-size) * -2) calc(var(--block-size) * -2) 0 0 #333,
        calc(var(--block-size) * 2) calc(var(--block-size) * -2) 0 0 #333,
        calc(var(--block-size) * -3) calc(var(--block-size) * -1) 0 0 #333,
        calc(var(--block-size) * -2) calc(var(--block-size) * -1) 0 0 #333,
        calc(var(--block-size) * 2) calc(var(--block-size) * -1) 0 0 #333,
        calc(var(--block-size) * 3) calc(var(--block-size) * -1) 0 0 #333,
        calc(var(--block-size) * -4) 0 0 0 #333,
        calc(var(--block-size) * -3) 0 0 0 #333,
        calc(var(--block-size) * 3) 0 0 0 #333,
        calc(var(--block-size) * 4) 0 0 0 #333,
        calc(var(--block-size) * -5) var(--block-size) 0 0 #333,
        calc(var(--block-size) * -4) var(--block-size) 0 0 #333,
        calc(var(--block-size) * 4) var(--block-size) 0 0 #333,
        calc(var(--block-size) * 5) var(--block-size) 0 0 #333,
        calc(var(--block-size) * -5) calc(var(--block-size) * 2) 0 0 #333,
        calc(var(--block-size) * 5) calc(var(--block-size) * 2) 0 0 #333,
        calc(var(--block-size) * -5) calc(var(--block-size) * 3) 0 0 #333,
        calc(var(--block-size) * -3) calc(var(--block-size) * 3) 0 0 #333,
        calc(var(--block-size) * 3) calc(var(--block-size) * 3) 0 0 #333,
        calc(var(--block-size) * 5) calc(var(--block-size) * 3) 0 0 #333,
        calc(var(--block-size) * -2) calc(var(--block-size) * 4) 0 0 #333,
        calc(var(--block-size) * -1) calc(var(--block-size) * 4) 0 0 #333,
        var(--block-size) calc(var(--block-size) * 4) 0 0 #333,
        calc(var(--block-size) * 2) calc(var(--block-size) * 4) 0 0 #333;
      background: #333;
      width: var(--block-size);
      height: var(--block-size);
      overflow: hidden;
      z-index: 1;
    }

    .bullet {
      position: absolute;
      bottom: 5%; /* Adjusted starting position */
      left: 50%;
      transform: translateX(-50%);
      width: 3px;
      height: 10%;
      background-color: #fff;
      display: none;
      z-index: 3;
    }

    .life {
      width: 50px;
      display: inline-block;
      -webkit-mask: radial-gradient(circle at 60% 65%, red 64%, transparent 65%) top left,
        radial-gradient(circle at 40% 65%, red 64%, transparent 65%) top right,
        linear-gradient(to bottom left, red 43%,transparent 43%) bottom left,
        linear-gradient(to bottom right,red 43%,transparent 43%) bottom right;
      -webkit-mask-size: 50% 50%;
      -webkit-mask-repeat: no-repeat;
      mask: radial-gradient(circle at 60% 65%, red 64%, transparent 65%) top left,
        radial-gradient(circle at 40% 65%, red 64%, transparent 65%) top right,
        linear-gradient(to bottom left, red 43%,transparent 43%) bottom left,
        linear-gradient(to bottom right,red 43%,transparent 43%) bottom right;
      mask-size: 50% 50%;
      mask-repeat: no-repeat;
      background: linear-gradient(red, blue);
    }

    .life::before {
      content: '';
      display: block;
      padding-top: 100%;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="triangle-up"></div>
    <div class="space-invader"></div>
    <div class="bullet"></div>
    <div class="life"></div>
    <div class="life"></div>
    <div class="life"></div>
  </div>

  <script>
    const triangleUp = document.querySelector('.triangle-up');
    const spaceInvader = document.querySelector('.space-invader');
    const bullet = document.querySelector('.bullet');
    const lives = document.querySelectorAll('.life');

    let isBulletActive = false;
    let bulletInterval;

    document.addEventListener('keydown', function (event) {
      if (event.code === 'Space' && !isBulletActive) {
        shootBullet();
      }

      if (event.code === 'ArrowLeft') {
        moveShip('left');
      } else if (event.code === 'ArrowRight') {
        moveShip('right');
      }
    });

    function moveShip(direction) {
      const currentPosition = parseFloat(getComputedStyle(triangleUp).left);

      if (direction === 'left' && currentPosition > 0) {
        triangleUp.style.left = currentPosition - 10 + 'px';
      } else if (direction === 'right' && currentPosition < window.innerWidth - 50) {
        triangleUp.style.left = currentPosition + 10 + 'px';
      }
    }

    function shootBullet() {
      isBulletActive = true;
      bullet.style.display = 'block';
      bullet.style.bottom = '5%'; // Adjusted starting position
      const bulletPosition = parseFloat(getComputedStyle(triangleUp).left) + 25; // Center of the ship

      bullet.style.left = bulletPosition + 'px';

      bulletInterval = setInterval(() => {
        const currentBottom = parseFloat(getComputedStyle(bullet).bottom);
        bullet.style.bottom = currentBottom + 5 + '%'; // Adjusted bullet movement

        const invaderRect = spaceInvader.getBoundingClientRect();
        const bulletRect = bullet.getBoundingClientRect();

        if (
          bulletRect.bottom >= invaderRect.top &&
          bulletRect.left >= invaderRect.left &&
          bulletRect.right <= invaderRect.right
        ) {
          resetBullet();
          resetInvader();
        }

        if (currentBottom >= 100) {
          resetBullet();
        }
      }, 16);
    }

    function resetBullet() {
      clearInterval(bulletInterval);
      isBulletActive = false;
      bullet.style.display = 'none';
      bullet.style.bottom = '5%'; // Adjusted starting position
    }

    function resetInvader() {
      spaceInvader.style.bottom = '80%'; // Adjusted starting position
    }

    function moveInvader() {
      const currentBottom = parseFloat(getComputedStyle(spaceInvader).bottom);
      spaceInvader.style.bottom = currentBottom - 0.1 + '%';
    }

    function gameLoop() {
      moveInvader();
      requestAnimationFrame(gameLoop);
    }

    requestAnimationFrame(gameLoop);
  </script>
</body>
</html>
